<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"><link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script><meta name="viewport" content="width=device-width, initial-scale=1"><title>ios 웹앱 만들기 | _JJ@Developer</title><meta name="generator" content="Jekyll v3.9.0" /><meta property="og:title" content="ios 웹앱 만들기" /><meta property="og:locale" content="en_US" /><meta name="description" content="This blog for software developing documentation." /><meta property="og:description" content="This blog for software developing documentation." /><link rel="canonical" href="http://localhost:4000/docs/etc/ios_webapp/" /><meta property="og:url" content="http://localhost:4000/docs/etc/ios_webapp/" /><meta property="og:site_name" content="_JJ@Developer" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-04-12T06:52:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="ios 웹앱 만들기" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-04-12T06:52:00+09:00","datePublished":"2022-04-12T06:52:00+09:00","description":"This blog for software developing documentation.","headline":"ios 웹앱 만들기","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/docs/etc/ios_webapp/"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/assets/images/one_.png"}},"url":"http://localhost:4000/docs/etc/ios_webapp/"}</script> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1261619070611227" crossorigin="anonymous"></script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"><title>Link</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"><title>Search</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"><title>Menu</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"><title>Expand</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"><title>Document</title><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"><div class="site-logo"></div></a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a></div><nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"><ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/" class="nav-list-link">Home</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/docs/clipping/jpa/jpa_programming/" class="nav-list-link">jpa 프로그래밍</a><li class="nav-list-item "><a href="http://localhost:4000/docs/clipping/java/oop_fact_c/" class="nav-list-link">객체지향의 사실과 오해 정리</a><li class="nav-list-item "><a href="http://localhost:4000/docs/clipping/java/optional/" class="nav-list-link">Optional 정리</a><li class="nav-list-item "><a href="http://localhost:4000/docs/clipping/java/effective_java/" class="nav-list-link">Effective Java</a><li class="nav-list-item "><a href="http://localhost:4000/docs/clipping/java/oop_1/" class="nav-list-link">기타</a></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/msa" class="nav-list-link">Msa</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/msa/feign/feign/" class="nav-list-link">Feign</a><ul class="nav-list"></ul><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/msa/elastic-search/elasticsearch/" class="nav-list-link">Elastic Search</a><ul class="nav-list"></ul></ul><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/errors" class="nav-list-link">Errors</a><ul class="nav-list "></ul><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/docs/etc" class="nav-list-link">Etc</a><ul class="nav-list "></ul></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div id="main-header" class="main-header"><div class="search"><div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search _JJ@Developer" aria-label="Search _JJ@Developer" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label></div><div id="search-results" class="search-results"></div></div></div><div id="main-content-wrap" class="main-content-wrap"><nav aria-label="Breadcrumb" class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/docs/etc">Etc</a><li class="breadcrumb-nav-list-item"><span>ios 웹앱 만들기</span></ol></nav><div id="main-content" class="main-content" role="main"><header class="header-page"><h1 class="page-title"> ios 웹앱 만들기</h1><div class="page-date"><span>2022, Apr 11&nbsp;&nbsp;&nbsp;&nbsp;</span></div></header><div class="col-lg-8 col-md-10 mx-auto"> <span class="tag">ios</span> <span class="tag">hybrid app</span> <span class="tag">firebase push</span></div><h2 id="목표"> <a href="#목표" class="anchor-heading" aria-labelledby="목표"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 목표</h2><p>firebase로 푸시받는 것 까지 하고 앱으로 배포</p><h2 id="기본-웹앱-작성"> <a href="#기본-웹앱-작성" class="anchor-heading" aria-labelledby="기본-웹앱-작성"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 기본 웹앱 작성</h2><p>웹앱 코드(<a href="https://www.youtube.com/watch?v=JafGypqFvs4">https://www.youtube.com/watch?v=JafGypqFvs4</a>)</p><h2 id="인증서-작업"> <a href="#인증서-작업" class="anchor-heading" aria-labelledby="인증서-작업"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 인증서 작업</h2><ul><li>testflight으로 푸시테스트가 가능하려면, AdHoc Provisioning Profile which will use the production push certificate을 발급받아야 한다. (개발용이면 안됨)<li>일단 fcm을 통한 발송준비용 인증서<ul><li>fcm을 통해서 발송하는 것은 apns를 통해서 하는 인증서 절차보다 간단합니다. apns를 통해 발송할 경우, fcm에서 한 절차보다 몇 가지 더 하면 됩니다.(두개를 공통으로 사용가능)<li>mac의 키체인에서 인증서 만들고<li><strong>Identifiers app등록</strong><ul><li><strong>App ID Prefix는 아무거나 (teamid가 없는것도 됨)</strong><li>push notification 선택</ul><li>다 등록하고 다시 상세내용에서 push notification의 edit 화면에서 배포용 인증서 생성<ul><li>로컬 키체인에서 csr파일 생성 (앱이 다르면, 각각 만들어주는 것이 좋다) - <a href="https://ios-development.tistory.com/247">https://ios-development.tistory.com/247</a><li>그러면 <strong>Certificates, Identifiers &amp; Profiles &gt; Certificate에서 푸시용 배포용 2개만들어지게 됨</strong><li>그러면 총 개인용, 푸시용(Apple Push Services로 등록한), 배포용 3개가 됨<li>앱을 동일 계정으로 여러개 만들 경우는 identifiers app등록하고 csr인증서 연결해주고 key등록해주면 됨</ul><li>Profile은 fcm일땐 생성안해도 됨<li>Keys 생성 (중요!)<ul><li>나중에 fcm 콘솔에 등록해야 하므로, 다운로드 파일(p8), Key Id 적어야함</ul></ul><li>firebase 설정<ul><li>firebase 프로젝트 생성하고 → plist파일을 xcode에 넣고 → xcode 프로젝트에 firebase 라이브러리 추가하고(라이브러리는 firebase messaging 만 선택) → firebase 코드 추가한다.<li>클라우드 메시지 → <strong>APN 인증 키 추가</strong><ul><li>apple developer의 Key 등록했을 때 받은, Keys의 Key Id, AuthKey~~.p8<li>team Id는 계정의 팀 아이디를 적는다(인증서랑 무관)</ul></ul><li>이제는 xcode 작업<ul><li>Sigining &amp; Capabilities에 push notification 과 background modes 추가<ul><li>background modes에는 background fetch와 remote notifications 선택</ul><li>info.plist에 속성 추가<ul><li>FirebaseAppDelegateProxyEnabled를 boolean으로 추가하고 NO로 설정</ul></ul></ul><h2 id="푸시-메시지-발송"> <a href="#푸시-메시지-발송" class="anchor-heading" aria-labelledby="푸시-메시지-발송"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 푸시 메시지 발송</h2><ul><li>테스트<ul><li>node의 apn모듈로 발송<ul><li>준비물 : 위에서 인증서 생성시 다운받은 p8파일과 p8파일의 KeyID, 팀ID, 번들ID</ul><p><a href="https://taesulee.tistory.com/5">iOS APNs 인증 키 p8 (iOS Key로 푸시 보내기)</a></p><li>firebase를 통해서 발송하는 방법도 있음<ul><li>token을 에스프레소로 앱에서 호출하도록 해야함<li>발송시간을 지금으로 해도 폰으로 오기까지 2~3분정도 걸리는 것 같다</ul></ul><li><p>token들을 서버 API를 통해 등록시키기</p><p>Alamofire라이브러리를 pod로 설치해서 post api</p><p><a href="https://velog.io/@budlebee/iOS-Alamofire-%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-API-%ED%98%B8%EC%B6%9C">iOS : Alamofire 를 이용한 API 호출</a></p></ul><h2 id="기타"> <a href="#기타" class="anchor-heading" aria-labelledby="기타"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 기타</h2><ul><li>앱아이콘 적용(<a href="https://appicon.co/">https://appicon.co/</a>)<li>뱃지 : ios는 서버에서 숫자를 발송시켜줘야한다고 함. 앱에선 왔을때 0으로 초기화하는 코드만 두고</ul><h2 id="-배포"> <a href="#-배포" class="anchor-heading" aria-labelledby="-배포"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> :: 배포</h2><ul><li>방식 결정 : 배포방식 중 testflight을 사용해보도록 함</ul><p><a href="https://www.blueswt.com/124">알면 알수록 헷갈리는 IOS 환경 #2 - 앱 배포방식에 대해서 알아보자.</a></p><ul><li>순서<ul><li><a href="https://dev-yakuza.posstree.com/ko/react-native/ios-testflight/">https://dev-yakuza.posstree.com/ko/react-native/ios-testflight/</a> 에 따라 xcode에서 앱 배포<li>xcode의 archive로 여러 앱을 했더니 자꾸 codesign이 다른 키체인껄로 되어서 아래와 같은 에러가 난다.</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  App Store Connect Operation Error
    
  No suitable application records were found. 
  Verify your bundle identifier ‘~~~’ is correct.
</code></pre></div></div><p>—&gt; 여러 가지 방법을 다 해봤지만, 결국 안되어서 Transporter앱을 통해서 업로드했다(<a href="https://red-cherry-ring.tistory.com/16">https://red-cherry-ring.tistory.com/16</a>) —&gt; 성공!!</p><ul><li>배포전 info.plist파일에 수출규정준수 설정 제외시켜야 함 (<a href="https://jh3786.tistory.com/11">https://jh3786.tistory.com/11</a>)</ul><li>참고<ul><li><a href="https://testflight.apple.com/">https://testflight.apple.com/</a></ul></ul><h2 id="reference"> <a href="#reference" class="anchor-heading" aria-labelledby="reference"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> reference</h2><p><a href="https://dev200ok.blogspot.com/2020/04/ios-notification-push.html">https://dev200ok.blogspot.com/2020/04/ios-notification-push.html</a></p><p><a href="https://www.raywenderlich.com/11395893-push-notifications-tutorial-getting-started">https://www.raywenderlich.com/11395893-push-notifications-tutorial-getting-started</a></p><h2 id="기타-1"> <a href="#기타-1" class="anchor-heading" aria-labelledby="기타-1"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> 기타</h2><p><a href="https://developer111.tistory.com/43">[iOS] 푸시알림 클라우드 메세지 보내기[2] (APNS, 파이어베이스)</a></p><ul><li>내 계정이 회사 계정의 팀멤버로 연결되어서, 인증서를 생성할 수 없는 문제가 생겼는데.(팀관리자 계정이 갱신이 안되어서..) - 일단 푸시하려면 구독이 필요해보인다.<li>내 맥은 카탈리나 10.15.7이고 xcode는 12.5로 ios15이상은 시뮬레이터나 폰에도 설치가 안되는 문제가 있다.<ul><li>xcode13버전의 파일을 일부 옮겨와서 폰에 설치하려고 하니, 빌드는 성공했지만 아래오류 발생</ul><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  The code signature version is no longer supported. 
  Domain: com.apple.dt.MobileDeviceErrorDomain
</code></pre></div></div><ul><li>해결은 <a href="https://stackoverflow.com/a/68467307">https://stackoverflow.com/a/68467307</a> 이렇게 -generate-entitlement-der를 추가해줬다.<li>저걸해주고 나서 fcm연동하니 발생했는데, TARGETS -&gt; select[your project name] -&gt; General -&gt; Frameworks,Libraries,and EmbeddedContent 에 가서 Firebase Analystic인가 하는 라이브러리를 제거해줬더니 해결</ul><li>p12파일을 생성하기까지</ul><p><a href="https://babbab2.tistory.com/57">iOS) APNs :: 인증서 발급받는 방법 (p.12, pem)</a></p><p><a href="https://developer111.tistory.com/44">[ios] 자바 스프링 서버에서 iOS앱에 푸시 알림 보내기(APNs 개발용, 배포용)</a></p><p><a href="https://scshim.tistory.com/31">[iOS] Spring 서버에서 사용할 APNS 인증서 준비</a></p><div class="col-lg-8 col-md-10 mx-auto"><hr/> <script src="https://utteranc.es/client.js" repo="tnfhrnsss/tnfhrnsss.github.io" issue-term="url" theme="boxy-light" crossorigin="anonymous" async> </script></div><hr><footer><p><a href="#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 Patrick Marsceill. Distributed by an <a href="https://github.com/pmarsceill/just-the-docs/tree/master/LICENSE.txt">MIT license.</a></p><div class="d-flex mt-2"></div></footer></div></div><div class="search-overlay"></div></div>
